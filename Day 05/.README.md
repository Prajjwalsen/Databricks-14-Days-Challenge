# ğŸ¯ Day 05 â€“ Delta Lake Advanced (Databricks)

## ğŸš€ Databricks 14 Days AI Challenge  
This document captures my learning and hands-on work for **Day 05** of the  
**Databricks 14 Days AI Challenge** by **Indian Data Club**.

---

## ğŸ“Œ Topics Covered
- Delta Lake Time Travel (Version History)
- Incremental MERGE (Upserts)
- Querying Historical Versions
- Table Optimization using OPTIMIZE
- Data Skipping with Z-ORDER
- Understanding VACUUM & Retention Policies

---

## ğŸ› ï¸ Tasks Completed

âœ… Implemented incremental MERGE using Delta Lake  
âœ… Queried historical versions using Time Travel  
âœ… Optimized Delta tables  
âœ… Applied Z-ORDER for performance optimization  
âš ï¸ VACUUM behavior understood (restricted in Community Edition)

---

## ğŸ§ª Hands-on Implementation

### ğŸ”¹ 1. Incremental Data Ingestion
New incoming data loaded for incremental processing.

![Incremental Data](Screenshots/incremental_data.png)

---

### ğŸ”¹ 2. Incremental MERGE (Upsert)
Applied MERGE operation to update existing records and insert new ones.

![Incremental Merge](Screenshots/incremental_merge.png)

---

### ğŸ”¹ 3. MERGE Result Verification
Verified affected rows after MERGE execution.

![Merge Result](Screenshots/merge_result.png)

---

### ğŸ”¹ 4. Delta Table History
Checked Delta Lake transaction history to track changes.

![Delta History](Screenshots/delta_history.png)

---

### ğŸ”¹ 5. Time Travel (Version Querying)
Queried older versions of the Delta table using time travel.

![Time Travel Version](Screenshots/time_travel_version.png)

---

### ğŸ”¹ 6. Table Optimization
Optimized Delta table to improve query performance.

![Optimize Table](Screenshots/optimize_table.png)

---

### ğŸ”¹ 7. Z-ORDER Optimization
Applied Z-ORDER on frequently queried columns for efficient data skipping.

![ZORDER Table](Screenshots/zorder_table.png)

---

## âš ï¸ VACUUM Note (Important)
VACUUM with retention less than **168 hours** is restricted in  
**Databricks Community / Serverless Edition**.

âœ”ï¸ The behavior and safety mechanism were observed and understood as part of learning.

---

## ğŸ§  Key Takeaways
- Delta Lake enables reliable **incremental data processing**
- Time Travel is powerful for auditing and debugging
- OPTIMIZE + Z-ORDER significantly improve query performance
- VACUUM is critical but protected by safety constraints

---

## ğŸ“‚ Repository Structure
```text
Day-05/
â”‚
â”œâ”€â”€ README.md
â””â”€â”€ Screenshots/
    â”œâ”€â”€ incremental_data.png
    â”œâ”€â”€ incremental_merge.png
    â”œâ”€â”€ merge_result.png
    â”œâ”€â”€ delta_history.png
    â”œâ”€â”€ time_travel_version.png
    â”œâ”€â”€ optimize_table.png
    â””â”€â”€ zorder_table.png

